<div cdk-overlay-origin
     class="mc-typeahead__trigger"
     #origin="cdkOverlayOrigin"
     #trigger>
    <div class="mc-typeahead__matcher">
        <span [ngSwitch]="!!customTrigger">
            <div *ngSwitchDefault class="mc-typeahead__match-container">
                <div class="mc-typeahead__match-list">
                    <mc-tag *ngFor="let option of triggerValues" [disabled]="disabled" [class.mc-error]="errorState">
                        {{ option.viewValue || option.value }}
                        <i mc-icon="mc-close-S_16" (click)="onRemoveMatcherItem(option, $event)"></i>
                    </mc-tag>

                    <input type="text"
                           class="mc-typeahead__match-input"
                           #input
                           (blur)="onBlur()">
                </div>
            </div>

            <ng-content select="mc-typeahead-trigger" *ngSwitchCase="true"></ng-content>
        </span>
    </div>
</div>

<ng-template
    cdk-connected-overlay
    cdkConnectedOverlayLockPosition
    [cdkConnectedOverlayScrollStrategy]="scrollStrategy"
    [cdkConnectedOverlayOrigin]="origin"
    [cdkConnectedOverlayOpen]="panelOpen"
    [cdkConnectedOverlayPositions]="positions"
    [cdkConnectedOverlayMinWidth]="triggerRect?.width"
    [cdkConnectedOverlayOffsetY]="offsetY"
    (attach)="onAttached()"
    (detach)="close()">

    <div #panel
         class="mc-typeahead__panel {{ getPanelTheme() }}"
         [ngClass]="panelClass"
         (@transformPanel.done)="panelDoneAnimatingStream.next($event.toState)"
         [style.transformOrigin]="transformOrigin"
         [class.mc-select-panel-done-animcing]="panelDoneAnimating"
         [style.font-size.px]="triggerFontSize">

        <div class="mc-typeahead__content"
             [@fadeInContent]="'showing'"
             (@fadeInContent.done)="onFadeInDone()">
            <ng-container #listContainer>
                <ng-content></ng-content>
            </ng-container>
        </div>
    </div>
</ng-template>
